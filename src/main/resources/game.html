<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Steam</title>
    <link rel="stylesheet" type="text/css" href="unified.css">
</head>
<body>
<div id="game-wrapper">
    <div id="main-content">
        <div class="info-bar">
            <div class="game-info-left">
                <span>Team: <b id="yourTeam">?</b></span>
                <span>Players: <b id="playerCount">0</b></span>
            </div>
            <div class="scoreboard-header">
                <span id="team1Score" class="team1">0</span>
                <span id="roundTimer" style="margin: 0 20px; color: var(--accent-gold);">00:00</span>
                <span id="team2Score" class="team2">0</span>
            </div>
            <div class="game-info-right">
                <span>Ping: <b id="latency" style="color: white;">--</b> ms</span>
                <span>Status: <b id="status" style="color: var(--accent-gold);">Connecting...</b></span>
            </div>
        </div>
        <canvas id="gameCanvas" width="1000" height="800" tabindex="-1" style="outline: none;"></canvas>
    </div>

    <div id="scoreboard-container">
        <h2 id="gameModeDisplay">
            Loading...
        </h2>
        <span id="gameIdIndicator" style="font-size: 0.6em; color: var(--text-muted); font-weight: normal;"></span>

        <div id="player-config">
            <div class="config-item">
                <label for="nameInput">Name:</label>
                <input type="text" id="nameInput" placeholder="Your Name">
            </div>
            <div class="config-item">
                <label for="weaponSelector">Weapon:</label>
                <select id="weaponSelector">
                    <option>Loading...</option>
                </select>
            </div>
            <button id="switchTeamBtn">Switch Team</button>
        </div>

        <div id="team1-scoreboard">
            <h3 class="team1">Team 1</h3>
            <ul id="team1-players">
                <!-- Team 1 players will be populated here -->
            </ul>
        </div>
        <div id="team2-scoreboard">
            <h3 class="team2">Team 2</h3>
            <ul id="team2-players">
                <!-- Team 2 players will be populated here -->
            </ul>
        </div>
        <div id="ffa-scoreboard" style="display: none;">
            <h3 style="color: var(--accent-gold);">Players</h3>
            <ul id="ffa-players">
                <!-- FFA players will be populated here -->
            </ul>
        </div>
        <div style="text-align: center; margin-top: 20px; padding: 0 5px;">
            <button id="leaveGameBtn">Leave Game</button>
            <button id="spectatorBtn">Switch to Spectator</button>
        </div>
        <div>
            <p>* Hold Tab/Menu to see controls</p>
        </div>
    </div>
</div>

<!-- Game Info Overlay -->
<div id="game-info-overlay">
    <div id="game-info-content">
        <div id="game-info-header">
            <h1 id="overlay-game-mode">Game Mode</h1>
            <div class="game-mode-subtitle" id="overlay-game-subtitle">Loading...</div>
        </div>

        <div class="info-section" id="objective-section">
            <h2>Objective</h2>
            <div class="objective-text" id="objective-text">
                Loading game mode information...
            </div>
            <div id="team-objectives" style="display: none;">
                <div class="team-objective">
                    <div class="team1-objective">
                        <h4 style="margin-top: 0; color: var(--team1-primary);">Team 1 (Green)</h4>
                        <div id="team1-objective-text"></div>
                    </div>
                    <div class="team2-objective">
                        <h4 style="margin-top: 0; color: var(--team2-primary);">Team 2 (Red)</h4>
                        <div id="team2-objective-text"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h2>Controls</h2>
            <div class="controls-grid">
                <div class="controls-column">
                    <h3>Keyboard & Mouse</h3>
                    <table class="controls-table">
                        <thead>
                        <tr>
                            <th>Action</th>
                            <th>Control</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Move</td>
                            <td>WASD / Arrow Keys</td>
                        </tr>
                        <tr>
                            <td>Aim</td>
                            <td>Mouse</td>
                        </tr>
                        <tr>
                            <td>Shoot</td>
                            <td>Left Mouse Button</td>
                        </tr>
                        <tr>
                            <td>Reload</td>
                            <td>R</td>
                        </tr>
                        <tr>
                            <td>Action/Build</td>
                            <td>E</td>
                        </tr>
                        <tr>
                            <td>Enter/Exit Vehicle</td>
                            <td>F</td>
                        </tr>
                        <tr>
                            <td>Alt-Fire</td>
                            <td>Q</td>
                        </tr>
                        <tr>
                            <td>Game Info</td>
                            <td>Tab (hold)</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="controls-column">
                    <h3>Gamepad</h3>
                    <table class="controls-table">
                        <thead>
                        <tr>
                            <th>Action</th>
                            <th>Control</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Move</td>
                            <td>Left Stick</td>
                        </tr>
                        <tr>
                            <td>Aim</td>
                            <td>Right Stick</td>
                        </tr>
                        <tr>
                            <td>Shoot</td>
                            <td>RT / R2</td>
                        </tr>
                        <tr>
                            <td>Reload</td>
                            <td>X / □</td>
                        </tr>
                        <tr>
                            <td>Action/Build</td>
                            <td>RB / R1</td>
                        </tr>
                        <tr>
                            <td>Enter/Exit Vehicle</td>
                            <td>A / X</td>
                        </tr>
                        <tr>
                            <td>Swap Weapon</td>
                            <td>Y / △</td>
                        </tr>
                        <tr>
                            <td>Alt-Fire</td>
                            <td>LT / L2</td>
                        </tr>
                        <tr>
                            <td>Game Info</td>
                            <td>Menu / Options</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="close-hint">
            Release Tab or press Menu/Options again to close
        </div>
    </div>
</div>

<script src="color-palette.js"></script>
<script src="game-engine.js"></script>
<script type="text/javascript">
    function initializeColorPalette() {
        const root = document.documentElement;

        // Background colors
        root.style.setProperty('--bg-primary', GameColors.background.primary);
        root.style.setProperty('--bg-secondary', GameColors.background.secondary);
        root.style.setProperty('--bg-panel', GameColors.background.panel);
        root.style.setProperty('--bg-card', GameColors.background.card);

        // Team colors
        root.style.setProperty('--team1-primary', GameColors.teams.team1.primary);
        root.style.setProperty('--team1-secondary', GameColors.teams.team1.secondary);
        root.style.setProperty('--team1-dark', GameColors.teams.team1.dark);
        root.style.setProperty('--team2-primary', GameColors.teams.team2.primary);
        root.style.setProperty('--team2-secondary', GameColors.teams.team2.secondary);
        root.style.setProperty('--team2-dark', GameColors.teams.team2.dark);

        // Border colors
        root.style.setProperty('--border-primary', GameColors.borders.primary);
        root.style.setProperty('--border-secondary', GameColors.borders.secondary);
        root.style.setProperty('--border-light', GameColors.borders.light);
        root.style.setProperty('--border-lighter', GameColors.borders.lighter);

        // Text colors
        root.style.setProperty('--text-primary', GameColors.text.primary);
        root.style.setProperty('--text-secondary', GameColors.text.secondary);
        root.style.setProperty('--text-muted', GameColors.text.muted);

        // Accent colors
        root.style.setProperty('--accent-gold', GameColors.accent.gold);
        root.style.setProperty('--accent-yellow', GameColors.accent.yellow);
        root.style.setProperty('--accent-blue', GameColors.accent.blue);

        // Interactive elements
        root.style.setProperty('--btn-primary', GameColors.interactive.button.primary);
        root.style.setProperty('--btn-hover', GameColors.interactive.button.hover);
        root.style.setProperty('--btn-border', GameColors.interactive.button.border);
        root.style.setProperty('--input-bg', GameColors.interactive.input.background);
        root.style.setProperty('--input-border', GameColors.interactive.input.border);
        root.style.setProperty('--input-text', GameColors.interactive.input.text);

        // Health colors
        root.style.setProperty('--health-high', GameColors.health.high);
        root.style.setProperty('--health-medium', GameColors.health.medium);
        root.style.setProperty('--health-low', GameColors.health.low);
        root.style.setProperty('--health-bg', GameColors.health.background);
        root.style.setProperty('--health-border', GameColors.health.border);
    }

    // Initialize colors when DOM is ready
    document.addEventListener('DOMContentLoaded', initializeColorPalette);
    window.addEventListener('load', () => {
        window.gameInfoOverlay = new GameInfoOverlay();
        new Game(document.getElementById('gameCanvas'));
    });
</script>
</body>
</html>